/**
 * Created by abhijit on 13/1/16.
 */
var Validation={},ValidationTools={};ValidationTools.pattern=function(e,t,a){console.log(e,t,a);var i=new RegExp(a);console.log(i.test(e))},Object.prototype.Validation=function(e,t,a){var i,r=this.toString();switch(t){case"maxlength":i=r.length>a?!1:!0;break;case"minlength":i=r.length<a?!1:!0;break;case"required":i=""==r.length?!1:!0;break;case"pattern":i=ValidationTools.pattern(r,t,a)?!1:!0;break;case"type":switch(a){case"email":var n=/[a-z A-Z]+[a-z A-z 0-9]*[@][a-z]+[.][a-z]+/i;i=n.test(r)?!0:!1;break;case"mobile":var n=/[0-9]{10}/g;i=n.test(r)?!0:!1;break;case"dropdown":i="null"==r?!1:!0;break;case"radio":var o=document.getElementById(e);if(o.hasAttribute("name")){var l=o.getAttribute("name");i=null==document.querySelector("input[name='"+l+"']:checked")?!1:!0}}}return i},Validation.report={issuccessful:!0,id:"",attribute:"",value:"",reset:function(){this.issuccessful=!0,this.id="",this.attribute="",this.value=""}},Validation.showError=function(){var e=document.createElement("div");document.getElementById(Validation.report.id);var t=document.getElementById(Validation.report.id).parentNode,a=document.getElementById(Validation.report.id),i=a.getBoundingClientRect().left;if(t&&a){var e=document.createElement("div");e.className="ValidationErrMsg";var r="";r="Error: "+Validation.report.attribute,r+=1==Validation.report.value?" !!! ":" is "+Validation.report.value,e.innerHTML=r;var n=document.createElement("div");n.className="ErrMsgBorder",e.style.marginLeft=i+"px",e.appendChild(n),a.parentNode.insertBefore(e,a.nextSibling)}},Validation.inProgress=function(){for(var e=0;e<Validation.fields.length;e++){for(var t=Object.keys(Validation.fields[e]),a=Validation.fields[e].id,i=document.getElementById(a).value,r=0;r<t.length;r++){var n=t[r],o=Validation.fields[e][n];if("id"!=n&&0==i.Validation(a,n,o)){Validation.report.issuccessful=!1,Validation.report.id=a,Validation.report.attribute=n,Validation.report.value=o;break}}if(!Validation.report.issuccessful){Validation.showError();break}}},Validation.ValidationErrMsgClear=function(){var e=document.getElementsByClassName("ValidationErrMsg");if(0!=e.length){var t=e[0].parentNode;t.removeChild(e[0]),Validation.report.reset()}},Validation.Initiate=function(e){document.getElementById(e).addEventListener("submit",function(t){t.preventDefault(),Validation.ValidationErrMsgClear(),Validation.inProgress(),Validation.report.issuccessful&&document.getElementById(e).submit()},!1)},Validation.createStyle=function(){var e=document.createElement("style"),t=".ValidationErrMsg{margin:10px 30px;position:absolute;padding:5px 10px;background-color:#cc3309;border:1px;box-shadow:1px 1px 2px 1px #ee3309;font-size:10px;color:#fefefe;border-radius:3px;} \n ";t+=".ErrMsgBorder{margin-top:-25px;position:absolute;width  : 0;height : 0;border-left   : 8px solid transparent;border-right  : 8px solid transparent;border-bottom : 12px solid #cc3309;}",e.innerHTML=t,document.body.appendChild(e)},Validation.createStyle();